# Руководство по тестированию лаунчера

## Быстрая проверка работоспособности

### 1. Тестовый запуск (рекомендуется)

Запустите автоматический тест, который проверит всю цепочку:

```bash
npm test
# или
node test-launch.js
```

Этот скрипт:
- ✓ Скачает Java (если нужно)
- ✓ Скачает Minecraft 1.20.1
- ✓ Проверит все файлы
- ✓ Попытается запустить игру
- ✓ Покажет детальные логи

### 2. Отладка проблем (если игра не запускается)

Запустите скрипт отладки который покажет все логи:

```bash
npm run debug
# или
node debug-launch.js
```

Этот скрипт:
- ✓ Покажет последние логи
- ✓ Найдет все ошибки
- ✓ Проверит установленные файлы
- ✓ Создаст скрипт для ручного запуска
- ✓ Даст рекомендации по исправлению

### 3. Ручной запуск (для глубокой отладки)

После запуска `npm run debug` будет создан файл `run-minecraft.bat` в папке экземпляра.

**Windows:**
```
C:\Users\ВашеИмя\.minecraft-custom-launcher\instances\vanilla-1-20-1\run-minecraft.bat
```

Запустите его двойным кликом - увидите все ошибки в консоли.

### 4. Проверка через лаунчер

1. **Установите зависимости:**
```bash
npm install
```

2. **Запустите лаунчер в режиме разработки:**
```bash
npm start
```

3. **Откройте DevTools для просмотра логов:**
   - В лаунчере нажмите `Ctrl+Shift+I` (Windows/Linux) или `Cmd+Option+I` (Mac)
   - Перейдите на вкладку "Console"

4. **Выберите версию и установите:**
   - Нажмите на любую версию Minecraft (например, 1.20.1)
   - Нажмите "Установить"
   - Следите за прогрессом в UI и логами в консоли

5. **Попробуйте запустить:**
   - После установки нажмите "Играть"
   - Смотрите логи в консоли

## Файлы логов

### Где находятся логи

**Лог лаунчера:**
```
C:\Users\ВашеИмя\.minecraft-custom-launcher\instances\vanilla-1-20-1\logs\launcher.log
```

**Лог Minecraft:**
```
C:\Users\ВашеИмя\.minecraft-custom-launcher\instances\vanilla-1-20-1\logs\latest.log
```

### Как читать логи

1. Откройте `launcher.log` в блокноте
2. Найдите секцию с последним запуском (ищите `ЗАПУСК:`)
3. Смотрите на ошибки в `[STDERR]` секциях
4. Код выхода не 0 означает ошибку

## Что проверять

### Логи установки Java

Должно быть:
```
Загрузка Java
Прогресс: 100%
Java установлена
```

### Логи установки Minecraft

Должно быть:
```
Получение информации о версии
Загрузка клиента - 100%
Загрузка библиотек (50/50) - 100%
Загрузка ассетов (1000/1000) - 100%
Завершено - 100%
```

### Логи запуска игры

Должно быть:
```
=== ЗАПУСК MINECRAFT ===
Версия: 1.20.1
Пользователь: Player
Память (RAM): 2048 MB
Java путь: C:\Users\...\java\bin\java.exe
Операционная система: windows
Загрузка конфигурации версии...
Главный класс: net.minecraft.client.main.Main

=== ФИНАЛЬНАЯ КОМАНДА ЗАПУСКА ===
Аргументов JVM: 15
Аргументов игры: 12
RAM выделено: 2048 MB
Запуск процесса Java...

✓ Процесс запущен с PID: 12345
[Minecraft] Loading Minecraft ...
[Minecraft] Starting game ...
```

## Типичные проблемы

### Проблема: "Java не найдена"

**Решение:**
1. Удалите папку `~/.minecraft-custom-launcher/java`
2. Переустановите сборку

### Проблема: "JAR файл не найден"

**Решение:**
1. Удалите папку `~/.minecraft-custom-launcher/versions/1.20.1`
2. Переустановите сборку

### Проблема: Процесс запускается но окна нет

**Возможные причины:**
1. Нехватка памяти - увеличьте RAM в настройках
2. Проблема с видеодрайверами - обновите драйвера
3. Ошибка в логах - проверьте консоль на наличие `[Minecraft ERROR]`

**Решение:**
Смотрите логи в консоли DevTools. Там будут детали ошибки.

### Проблема: "Minecraft завершён с кодом 1"

Это значит что игра упала с ошибкой. Смотрите логи выше для деталей.

## Проверка установленных файлов

### Windows

Откройте: `C:\Users\ВашеИмя\.minecraft-custom-launcher`

Должна быть структура:
```
.minecraft-custom-launcher/
├── java/
│   └── bin/
│       └── java.exe
├── versions/
│   └── 1.20.1/
│       ├── 1.20.1.json
│       └── 1.20.1.jar
├── libraries/
│   └── (множество jar файлов)
├── assets/
│   └── objects/
│       └── (множество файлов)
└── instances/
    └── vanilla-1-20-1/
```

### Linux/Mac

Откройте: `~/.minecraft-custom-launcher`

Та же структура.

## Размеры файлов (примерно)

- **Java:** ~180-200 MB
- **Minecraft JAR:** ~15-30 MB
- **Библиотеки:** ~50-100 MB (50-100 файлов)
- **Ассеты:** ~100-400 MB (1000-3000 файлов)

## Ручная проверка Java

```bash
# Windows
C:\Users\ВашеИмя\.minecraft-custom-launcher\java\bin\java.exe -version

# Linux/Mac
~/.minecraft-custom-launcher/java/bin/java -version
```

Должно показать:
```
openjdk version "17.0.X"
```

## Если ничего не помогает

1. **Удалите всю директорию лаунчера:**
   - Windows: `C:\Users\ВашеИмя\.minecraft-custom-launcher`
   - Linux/Mac: `~/.minecraft-custom-launcher`

2. **Переустановите все заново**

3. **Запустите test-launch.js и скопируйте весь вывод**

4. **Создайте issue на GitHub с логами**

## Тестирование на другой версии

Если 1.20.1 не работает, попробуйте старую версию 1.12.2:

Измените в `test-launch.js`:
```javascript
const testVersion = '1.12.2'; // вместо '1.20.1'
```

1.12.2 обычно более стабильна и имеет меньше зависимостей.

## Логи для разработчиков

Все логи выводятся в:
- **Консоль Electron** (Ctrl+Shift+I в лаунчере)
- **Консоль Node.js** (если запускали через `npm start`)

Для максимальных логов добавьте перед запуском:
```bash
# Windows
set NODE_ENV=development
npm start

# Linux/Mac
NODE_ENV=development npm start
```
